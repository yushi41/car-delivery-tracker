# 納車待ち管理アプリ - 学習記録

## 📖 このファイルについて

このファイルは、プロジェクト開発中の**学習の進捗を記録する**ためのファイルです。

### 記録する内容
1. **質問内容** - どんなことを質問したか
2. **回答内容** - 質問に対する回答（該当する場合）
3. **実施内容** - 実際に何をしたか（コード実装、ファイル作成、設定変更など）
4. **理解したこと** - 新しく学んだ技術、概念、ベストプラクティス
5. **用語集** - 新しい専門用語が出てきた場合は随時追加

### 目的
- 学習の進捗を可視化する
- 後から振り返って「あの時何を学んだか」を確認できる
- 開発の履歴を追跡する
- 新しい概念や技術を整理して理解を深める

### ルール
- **開発中のすべての質問・学習内容をここに随時記録する**
- 日付ごとに整理する
- 専門用語は用語集に追加して、後から見返せるようにする

---

## プロジェクト概要
- **目的**: 中古車の納車待ち状況を管理するウェブアプリケーション
- **対象**: 非エンジニア・初めてのウェブアプリ開発

---

## 学習記録

### 2025年11月8日

#### 質問1: プロジェクトの開始
**質問内容**:
- 中古車の納車待ちウェブアプリを作成したい
- 学習記録ファイルを作成してほしい

**実施内容**:
- 学習記録用のマークダウンファイルを作成

**理解したこと**:
- このファイルで学習の進捗を記録できる
- マークダウン形式で見やすく整理される

---

#### 質問2: 要件定義書の作成
**質問内容**:
- 最低限の機能で始めたい
- 機能を一緒に考えて要件定義書に記録してほしい

**実施内容**:
- 要件定義書ファイル（要件定義書.md）を作成
- 検討すべき項目をリスト化

**理解したこと**:
- 最初から全機能を作るのではなく、必要最低限から始める方が良い
- 要件定義書で機能を整理することで、開発の方向性が明確になる

---

#### 質問3: 利用環境の確定
**質問内容**:
- 誰が使うのか？
- どのデバイスで使うのか？

**回答内容**:
- 最初は自分だけ、将来的に3人程度の社内運用予定
- iPhone（メイン）とWindows PC（サブ）の両方で使用

**実施内容**:
- 要件定義書に利用環境の情報を記載

**理解したこと**:
- 複数デバイス対応が必要なので、ブラウザベースのウェブアプリが最適
- iPhoneで使いやすい画面設計（スマホファースト）が重要
- 将来的に複数人で使えるように、ユーザー管理機能も視野に入れる

---

#### 質問4: 管理対象と重要機能の確定
**質問内容**:
- 何台の車を管理するのか？
- 社内運用時の使い方は？
- 一番重要な機能は何か？

**回答内容**:
- 複数台の車両を同時に管理
- 社内運用時は全車両をまとめて管理し、各車両に担当者を割り当て
- 納車予定日の確認（カレンダー形式とカウントダウン形式）
- Googleカレンダー連携もあると嬉しい

**実施内容**:
- 要件定義書にコア機能を記載
- 画面構成の提案（カードビュー、テーブルビュー、カレンダービュー）

**理解したこと**:
- 複数車両を扱うので、一覧性の高い画面設計が重要
- 担当者でフィルタリングできる機能が必要
- スマホでは「カードビュー」、PCでは「テーブル」と「カレンダー」の切り替えが便利
- 外部サービス（Googleカレンダー）との連携も検討

---

#### 質問5: 技術スタックとデザインコンセプト
**質問内容**:
- どんな技術で作るか？
- どんなデザインにするか？

**回答内容**:
- デプロイはVercelで行う（必須）
- デザインはAppleのような洗練された美しさを目指す
- 世界をとるアプリとして、ユーザーにワクワク感と「すごい」という感情を持たせたい

**実施内容**:
- 技術スタックを確定（Vercel + Next.js + TypeScript + Tailwind CSS）
- デザインコンセプトを詳細に定義
- デザインイメージファイル作成（カラーパレット、画面レイアウト、アニメーション仕様）

**理解したこと**:
- **Vercel + Next.js**: デプロイが簡単で相性抜群の組み合わせ
- **TypeScript**: 型がある言語で、バグを減らせる
- **Tailwind CSS**: 美しいデザインを素早く実装できる
- **Framer Motion**: 滑らかなアニメーションを実現
- **デザイン原則**: ミニマリズム、余白の美、マイクロインタラクション
- **UI/UX**: 見た目だけでなく、使っていて気持ちいい体験が重要

---

#### 作成ファイル: プロジェクトドキュメント整備
**作成したファイル**:
1. **デザインイメージ.md** - 具体的なデザイン仕様書
   - カラーパレット（ブルー系＋グリーン系）
   - 画面レイアウト図（モバイル・PC）
   - アニメーション仕様
   - 細部の仕様（フォント、影、角丸など）

2. **README.md** - プロジェクト全体の概要
   - プロジェクトの目的とコンセプト
   - 技術スタック一覧
   - 開発ステップ
   - ドキュメント構成

**理解したこと**:
- ドキュメントを整備することで、開発の方向性が明確になる
- デザイン仕様を事前に決めることで、実装時に迷わない
- 色、フォント、余白などの細かい仕様も重要
- 参考サイトを見ることで、イメージが具体化する
- 


---

### 2025年11月9日

#### 質問6: プロジェクトの内容確認と学習記録ルール
**質問内容**:
- このリポジトリの内容を理解できるか？
- 学習記録.mdに今後の質問や学習内容を記録してほしい
- この記録ルールをリポジトリのルールとして追加してほしい

**実施内容**:
- プロジェクトの全体像を把握
- 主要ファイル（package.json、README.md、要件定義書.md、デザインイメージ.md、src/app/page.tsx）を確認
- プロジェクトの現状と今後の方向性を説明
- ルートのREADME.mdに「開発ルール」セクションを追加
- car-delivery-tracker/README.mdの学習記録の説明を更新
- 学習記録.mdの冒頭に「このファイルについて」セクションを追加

**理解したこと**:
- プロジェクトは開発環境のセットアップが完了した段階
- Next.js + TypeScript + Tailwind CSSの基本構成が整っている
- これから実際の機能実装に入っていく段階
- **学習記録を継続的に更新していくことで、学習の進捗を可視化できる**
- **ルールを明文化することで、一貫性のある開発プロセスを維持できる**
- ドキュメント管理を適切に行うことで、プロジェクトの品質が向上する

---

#### 質問7: モックアップの作成
**質問内容**:
- 次に何をすべきか？
- モックアップの作成をお願いしたい

**実施内容**:
1. **型定義の作成** (`src/app/types/vehicle.ts`)
   - 車両情報の型（Vehicle）を定義
   - ステータスの型を定義
   - ステータスに応じた色設定を作成

2. **モックデータの作成** (`src/app/data/mockVehicles.ts`)
   - 5台の車両データを作成
   - 様々なステータスのサンプルを用意

3. **ユーティリティ関数の作成** (`src/app/utils/dateUtils.ts`)
   - 納車予定日までの残り日数を計算する関数
   - 日付を日本語形式でフォーマットする関数
   - 価格を円形式でフォーマットする関数

4. **車両カードコンポーネントの作成** (`src/app/components/VehicleCard.tsx`)
   - 車両情報を美しく表示するカード
   - カウントダウン表示（大きく目立つように）
   - 残り日数に応じた絵文字表示
   - ホバー時のアニメーション効果

5. **メインページの実装** (`src/app/page.tsx`)
   - ヘッダー（タイトルと新規登録ボタン）
   - サマリーカード（納車待ち台数、今月予定、来月予定）
   - 車両一覧表示（納車予定日が近い順）
   - レスポンシブデザイン（モバイル・タブレット・PC対応）

**理解したこと**:
- **TypeScript の型定義**: データの構造を型で定義することで、エラーを防げる
- **コンポーネント設計**: 再利用可能な部品（VehicleCard）を作ることで、コードがきれいになる
- **プロップス（Props）**: 親から子コンポーネントへデータを渡す仕組み
- **モックデータ**: データベースがなくても、仮のデータで開発を進められる
- **ユーティリティ関数**: 共通の処理を関数にまとめることで、コードの重複を避けられる
- **Tailwind CSS**: クラス名を組み合わせるだけで、美しいデザインが実現できる
- **レスポンシブデザイン**: `grid-cols-1 md:grid-cols-2 lg:grid-cols-3` のようなクラスで、画面サイズに応じてレイアウトが変わる
- **ホバー効果**: `hover:shadow-xl` や `hover:-translate-y-1` で、マウスを乗せた時のアニメーション
- **条件付きレンダリング**: `{vehicle.memo && ...}` で、データがある時だけ表示

**新しい用語**:
- **Props（プロップス）**: コンポーネントに渡すデータ
- **インターフェース（Interface）**: TypeScriptの型定義の一種
- **モックデータ**: 仮のテストデータ
- **ユーティリティ関数**: 便利な共通処理をまとめた関数
- **レスポンシブデザイン**: 画面サイズに応じて表示を変える設計

---

#### 質問8: 絵文字をモノクロアイコンに変更
**質問内容**:
- カウントダウンの横の絵文字を削除してほしい
- 絵文字を使う部分はすべてモノクロアイコンにしてほしい

**実施内容**:
1. **Heroiconsのインストール** - モノクロアイコンライブラリ
2. **VehicleCardの更新**
   - 📅 → CalendarIcon
   - 👤 → UserIcon
   - 💭 → DocumentTextIcon
3. **メインページの更新**
   - 🚗 → TruckIcon
   - ＋ → PlusIcon

**理解したこと**:
- **Heroicons**: Tailwind CSSの公式アイコンライブラリ
- **outline vs solid**: アウトラインスタイルとソリッドスタイルの違い
- **アイコンのサイズ指定**: `w-4 h-4`などのTailwindクラス
- **色の指定**: `text-gray-500`でアイコンの色を変更
- **統一感**: すべてモノクロにすることで、洗練された見た目になる

---

#### 質問9: データベース設計とSupabase接続
**質問内容**:
- データベース設計をしたい
- Supabaseを使いたい
- 無料枠で可能か？

**実施内容**:
1. **Supabaseプロジェクトの作成**
   - アカウント作成
   - 新規プロジェクト作成
   - Region: Northeast Asia (Tokyo)選択
   
2. **環境変数の設定**
   - Supabase Dashboard → Settings → API
   - Project URLとanon keyを取得
   - `.env`ファイルに設定
   - トラブルシューティング（保存忘れが原因）

3. **Supabase Clientのインストール**
   - `npm install @supabase/supabase-js`
   - `src/lib/supabase.ts`でクライアント初期化

4. **データベーステーブルの作成**
   - `vehicles`テーブルの設計
   - SQLファイル作成（`supabase-setup.sql`）
   - Supabase SQL Editorで実行
   - サンプルデータ5台を登録

5. **データ取得機能の実装**
   - `src/app/lib/vehicleService.ts`作成
   - CRUD機能実装（作成・読取・更新・削除）
   - メインページをSupabase対応に変更

6. **動作確認**
   - 開発サーバー再起動
   - Supabaseからデータ取得成功！
   - 5台の車両が正しく表示

**理解したこと**:
- **Supabaseの無料枠**: 500MB、50,000ユーザー/月で十分すぎる
- **環境変数**: `.env`ファイルで機密情報を管理
- **NEXT_PUBLIC_プレフィックス**: クライアント側で使える環境変数
- **Supabase vs Prisma**: SupabaseクライアントはPrismaより簡単
- **async/await**: 非同期処理でデータベースから取得
- **データ変換**: Supabaseのsnake_caseをcamelCaseに変換
- **SQL**: データベーステーブルを作成する言語
- **UUID**: 一意のIDを自動生成
- **トリガー**: データ更新時に自動でupdated_atを更新
- **.envファイルの注意点**: 
  - `=`の前後にスペースを入れない
  - 【】や引用符を付けない
  - 保存を忘れない
  - 保存後は必ずサーバーを再起動

**新しい用語**:
- **Supabase**: PostgreSQLベースのBaaS（Backend as a Service）
- **BaaS**: バックエンドの機能をサービスとして提供
- **PostgreSQL**: オープンソースのリレーショナルデータベース
- **環境変数**: アプリの設定情報を外部ファイルで管理
- **API Key**: サービスにアクセスするための鍵
- **CRUD**: Create（作成）、Read（読取）、Update（更新）、Delete（削除）
- **SQL**: データベースを操作する言語
- **テーブル**: データを格納する表形式の構造
- **UUID**: 一意の識別子（Universally Unique Identifier）
- **トリガー**: 特定の操作時に自動実行される処理
- **snake_case**: 単語をアンダースコアで繋ぐ命名規則（例：delivery_date）
- **camelCase**: 単語の先頭を大文字にする命名規則（例：deliveryDate）

---

#### 質問10: 新規登録フォームの実装
**質問内容**:
- 選択肢1の新規登録機能を実装したい
- 「新規登録」ボタンで車両を追加できるようにしたい

**実施内容**:
1. **モーダルコンポーネントの作成** (`Modal.tsx`)
   - 美しいポップアップウィンドウ
   - 背景オーバーレイ
   - 閉じるボタン

2. **新規登録フォームの作成** (`VehicleForm.tsx`)
   - 入力フィールド（メーカー、車種、年式、価格、日付など）
   - バリデーション（必須項目チェック）
   - ステータスのドロップダウン
   - 送信中の表示（ローディング）

3. **HomeClientコンポーネントの作成**
   - Server ComponentとClient Componentの分離
   - モーダルの開閉制御
   - データの管理

4. **トラブルシューティング**
   - **問題1**: 新規登録しても画面に反映されない
   - **原因**: Row Level Security（RLS）が有効で権限がない
   - **解決**: SQLでRLSポリシーを設定（読取・挿入・更新・削除権限を付与）
   
   - **問題2**: RLS設定後も反映されない
   - **原因**: `router.refresh()`だけではキャッシュが更新されない
   - **解決**: Server Actionsと`revalidatePath`を使用

5. **Server Actionsの実装** (`vehicleActions.ts`)
   - `'use server'`でサーバー側処理を宣言
   - `revalidatePath('/')`でキャッシュを無効化
   - 自動的にページが再レンダリング

**理解したこと**:
- **モーダル**: ポップアップウィンドウを実装する方法
- **フォーム管理**: `useState`で入力値を管理
- **バリデーション**: `required`属性で必須チェック
- **Row Level Security（RLS）**: Supabaseのセキュリティ機能
  - デフォルトで有効
  - 明示的に権限を設定しないとデータ操作不可
  - ポリシーで細かく権限を制御
- **Server Actions**: Next.js 14の新機能
  - `'use server'`で宣言
  - サーバー側で実行される関数
  - クライアントから直接呼び出せる
  - 自動的にキャッシュを管理
- **revalidatePath**: 特定のパスのキャッシュを無効化
  - ページが自動的に再レンダリング
  - 最新のデータが表示される
- **Client vs Server Component**:
  - Server Component: サーバー側でレンダリング、データ取得に最適
  - Client Component: ブラウザで動作、インタラクティブな機能に必要
  - `'use client'`でClient Componentを宣言

**新しい用語**:
- **Modal（モーダル）**: ポップアップウィンドウのこと
- **Row Level Security（RLS）**: 行レベルのセキュリティ制御
- **ポリシー**: データベースのアクセス権限ルール
- **Server Actions**: サーバー側で実行される関数（Next.js 14）
- **revalidatePath**: キャッシュを無効化してページを再レンダリング
- **Client Component**: ブラウザで動作するコンポーネント
- **Server Component**: サーバー側でレンダリングされるコンポーネント
- **`'use client'`**: Client Componentを宣言するディレクティブ
- **`'use server'`**: Server Actionを宣言するディレクティブ

---

#### 質問11: GitHubとVercelへのデプロイ
**質問内容**:
- GitHubに連携して保存したい
- Vercelで公開したい

**実施内容**:
1. **Gitの初期設定**
   - `git config --global user.name` でユーザー名を設定
   - `git config --global user.email` でメールアドレスを設定
   - 初回のみ必要な設定

2. **Gitコミット**
   - `git add .` で全ファイルをステージング
   - `git commit -m "Initial commit: 納車待ち管理アプリ完成版"` でコミット
   - 32個のファイルをコミット

3. **GitHubリポジトリの作成**
   - GitHub.comで新規リポジトリ作成
   - リポジトリ名: `car-delivery-tracker`
   - Public/Privateを選択

4. **GitHubへのプッシュ**
   - `git remote add origin` でリモートリポジトリを追加
   - `git push -u origin main` でGitHubにプッシュ
   - コードが世界中からアクセス可能に

5. **Vercelでのデプロイ**
   - Vercel.comにGitHubアカウントで連携
   - GitHubリポジトリをインポート
   - 環境変数の設定（`NEXT_PUBLIC_SUPABASE_URL`, `NEXT_PUBLIC_SUPABASE_ANON_KEY`）
   - Deployボタンでデプロイ開始
   - 2〜3分で完了

**理解したこと**:
- **Git**: バージョン管理システム
  - コードの履歴を管理
  - 変更を追跡できる
  - チームで開発する際に必須
- **GitHub**: Gitリポジトリのホスティングサービス
  - コードをオンラインで保存
  - 他の人と共有できる
  - バックアップにもなる
- **Vercel**: Next.jsに特化したホスティングサービス
  - GitHubと連携が簡単
  - 自動デプロイ（GitHubにプッシュすると自動で反映）
  - 無料プランで十分
  - 高速なCDN（世界中で高速アクセス）
- **環境変数**: 機密情報を安全に管理
  - SupabaseのURLやキーを設定
  - コードに直接書かない（セキュリティ）
  - Vercelの管理画面で設定
- **デプロイ**: アプリを公開すること
  - ローカル（自分のPC）→ オンライン（世界中）
  - URLが発行される
  - 誰でもアクセスできる

**新しい用語**:
- **Git**: 分散型バージョン管理システム
- **GitHub**: Gitリポジトリのホスティングサービス
- **リモートリポジトリ**: オンライン上のリポジトリ
- **プッシュ（push）**: ローカルの変更をリモートにアップロード
- **コミット（commit）**: 変更を記録すること
- **ブランチ（branch）**: 開発の流れ（main/master）
- **Vercel**: Next.jsのホスティングサービス
- **デプロイ**: アプリを公開すること
- **CDN**: コンテンツ配信ネットワーク（世界中で高速配信）
- **環境変数**: 設定情報を管理する変数
- **ビルド**: ソースコードを実行可能な形式に変換

**トラブルシューティング**:
- **問題**: `Author identity unknown`エラー
- **原因**: Gitの初期設定が未完了
- **解決**: `git config`でユーザー名とメールを設定

---

## 次のステップ
- ✅ 必要最低限の機能を決定する（完了）
- ✅ 画面構成の提案（完了）
- ✅ 使用する技術スタック選択（完了）
- ✅ デザインコンセプト策定（完了）
- ✅ プロジェクトの内容理解（完了）
- ✅ モックアップの作成（完了）
- ✅ 絵文字をモノクロアイコンに変更（完了）
- ✅ データベース設計とSupabase接続（完了）
- ✅ データ取得機能の実装（完了）
- ✅ 車両の新規登録フォームの実装（完了）
- ✅ 車両の編集・削除機能の実装（完了）
- ✅ GitHubへのプッシュ（完了）
- ✅ Vercelでのデプロイ（完了）
- **フィルタリング・検索機能**（次のステップ）
- **カレンダー表示機能**
- **担当者別の表示機能**

---

## 用語集

### ウェブ開発関連
- **ウェブアプリ**: ブラウザ（Chrome、Safariなど）で動作するアプリケーション。インストール不要で、URLにアクセスするだけで使える
- **レスポンシブデザイン**: 画面サイズ（スマホ、タブレット、PC）に応じて自動的にレイアウトが調整されるデザイン手法
- **ブラウザベース**: アプリをインストールせず、ブラウザだけで使えること

### 開発プロセス関連
- **要件定義**: アプリに必要な機能や仕様を整理して文書化すること
- **コア機能**: アプリの核となる、最も重要な機能
- **UI（ユーザーインターフェース）**: ユーザーが実際に操作する画面や見た目
- **フィルタリング**: 条件を指定してデータを絞り込むこと（例：担当者別に表示）

### 画面表示形式
- **カードビュー**: 各項目をカード状のボックスで表示する形式。視覚的にわかりやすい
- **テーブルビュー**: 表形式で情報を一覧表示する形式。多くの情報を比較しやすい
- **カレンダービュー**: カレンダー形式で日付ベースに情報を表示する形式

### 技術用語（フレームワーク・ツール）
- **Vercel**: ウェブアプリを簡単に公開（デプロイ）できるサービス。無料プランあり
- **Next.js**: Reactをベースにしたフレームワーク。ウェブアプリを作りやすくする
- **React**: Facebookが開発したJavaScriptライブラリ。UIを部品化して管理できる
- **TypeScript**: JavaScriptに「型」を追加した言語。エラーを事前に見つけやすい
- **Tailwind CSS**: CSSフレームワーク。美しいデザインを素早く実装できる
- **shadcn/ui**: 高品質なUIコンポーネント集。ボタン、カードなどが美しく使いやすい
- **Framer Motion**: アニメーションライブラリ。滑らかな動きを簡単に実装できる
- **Prisma**: データベース操作を簡単にするツール（ORM）
- **API**: アプリケーション同士が通信するための仕組み（例：Googleカレンダーとの連携）

### デザイン用語
- **UI（ユーザーインターフェース）**: ユーザーが見る画面や操作する部分
- **UX（ユーザーエクスペリエンス）**: ユーザーがアプリを使う時の体験全体
- **ミニマリズム**: 最小限の要素で最大の効果を出すデザイン手法
- **マイクロインタラクション**: ボタンを押した時など、小さな動きや反応
- **レスポンシブデザイン**: 画面サイズに応じて自動調整されるデザイン
- **グラスモーフィズム**: ガラスのような半透明でぼかしのあるデザイン表現
- **スケルトンスクリーン**: 読み込み中に表示する、内容の形を表すプレースホルダー
- **ダーク/ライトモード**: 暗い背景/明るい背景を切り替えられる機能

### React・TypeScript用語
- **コンポーネント**: 再利用可能なUI部品。Reactアプリは複数のコンポーネントで構成される
- **Props（プロップス）**: 親コンポーネントから子コンポーネントへ渡すデータ
- **インターフェース（Interface）**: TypeScriptでデータの型を定義する方法
- **型定義**: データがどんな形をしているかを定義すること（例：文字列、数値、日付など）
- **モックデータ**: データベースがない段階で使う、仮のテストデータ
- **ユーティリティ関数**: よく使う処理をまとめた便利な関数
- **条件付きレンダリング**: 条件に応じて表示を変えること（例：データがある時だけ表示）
- **map関数**: 配列の各要素に対して処理を行い、新しい配列を作る関数
- **async/await**: 非同期処理を同期的に書ける構文（データベースからの取得など）

### データベース・バックエンド用語
- **Supabase**: PostgreSQLベースのBaaS（Backend as a Service）
- **BaaS**: バックエンドの機能をサービスとして提供するサービス
- **PostgreSQL**: オープンソースのリレーショナルデータベース
- **SQL**: データベースを操作するための言語
- **テーブル**: データを格納する表形式の構造
- **CRUD**: Create（作成）、Read（読取）、Update（更新）、Delete（削除）の略
- **UUID**: 一意の識別子（Universally Unique Identifier）
- **環境変数**: アプリの設定情報を外部ファイルで管理する仕組み
- **API Key**: サービスにアクセスするための鍵（パスワードのようなもの）
- **トリガー**: 特定の操作時に自動実行される処理
- **snake_case**: 単語をアンダースコアで繋ぐ命名規則（例：delivery_date）
- **camelCase**: 単語の先頭を大文字にする命名規則（例：deliveryDate）

（今後も新しい用語が出てきたら追加していきます）


